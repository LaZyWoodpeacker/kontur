# [Тестовое контур](Тестовое_задание_на_специалиста_по_внедрению_УЦ.docx)

## Теоретическая часть

### 1 

Необходимо выяснить как именно подписи собираются использовать квалифицированные неквалифицированные или и те и другие. На основании этого сформировать требования к системе хранения персональных данных. Какие реквизиты пользователя нужны сканы документов. Необходимо также выделить сотрудника ответственного за валидацию и сбор данных на стороне клиента. Определиться с ролями для выдачи мчд, передоверяемых для администратора.  Для внешнего документооборота и формализованных документов использовать апи диадока. Для внутреннего можно использовать облачные НЕПы через CryptoApi и приложение. Система ЭДО клиента должна работать через защищённый канал. Обеспечивать мониторинг очередей событий. 

### 2

Подписать документ можно но в зависимости от разных факторов, например усовершенствованная эта подпись или нет и оператора ЭДО(успеет ли он за этот промежуток времени актуализировать данные об отзыве сертификата). В любом случае юридической значимости данный документ иметь не должен. Возможна ситуация при подписания документа без оператора ЭДО(например по электронной почте) и без использования усовершенствованной подписи тогда нет возможности проверить точное время подписания документа. Тогда ответственность ложится на вносящего документы в свою учётную систему.

## Практическая часть


### 1
Пример работы с апи 

Создаёт заявку пользователя и передаёт на валидацию УЦ
```
docker run --rm -v ./app:/app node:latest /app/start create
```

Создаёт заявление в случае если заявка находится в статусе approved Создаёт заявку на выпуск сертификата
```
docker run --rm -v ./app:/app node:latest /app/start sendRequest
```

Подтверждает личность в статусе identityVerification
```
docker run --rm -v ./app:/app node:latest /app/start checkIdentify
```

Создаёт и отправляет на подпись документ 
```
docker run --rm -v ./app:/app node:latest /app/start sign
```
### Дополнительно 
- При изменении паспортных данных на тестовой площадке ничего не меняется вероятно они не прошли бы валидацию УЦ
- Для проверки тлс канала 

```
docker run --rm -v ./app:/app node:latest /app/start hello
```

### 2

- При загрузке подписанной тестовой МЧД
![Ответ ФНС](images/fnsresponse.png)

- [МЧД](/app/testmhd.xml)
- [Подпись](/app/signature.der.sig)

https://itest.kontur-ca.ru/Wizard/Run?formId=2de5fe8a-85fe-4a2b-9cab-1494453de935
http://46.17.202.75:5555/api/testsms?phone=79122694997

